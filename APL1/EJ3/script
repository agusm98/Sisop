#! /bin/bash

while getopts ":c:a:" param; do
    case "${param}" in
		c)
			c=${OPTARG};; #Directorio a monitorear cambios
			#func Monitorear(c);;
		a)
			a=${OPTARG};;
		*)
			echo "${param} not valid";;
	esac
done

actionHandler() {

    IFS=','
    for action in $a; do
        case $action in
            listar)
                listar $c;;
            peso)
                peso $c;;
            compilar)
                compilar $c;;
            publicar)
                publicar $s;;
            *)
                echo "$action invalida";;
        esac
    done
}

listar() {
    echo `ls $1`
}

peso() { echo "peso call $1"; }
compilar() {
    #if file exist remove
    if [[ -e ./bin/output.txt ]]; then
        rm ./bin/output.txt
    fi
    #create output file
    mkdir -p ./bin
    touch ./bin/output.txt
    
    find $1 -type f -name '*.txt' -exec cat {} + >> './bin/output.txt';
}

publicar() {
    if [[ CAN_PUSH ]]; then
        cp ./bin/output.txt $2
    fi
}
echo "Parametros $c $a";
actionHandler
